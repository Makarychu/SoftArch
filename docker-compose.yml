services:
  # üé¨ Video Service
  - type: web
    name: video-service
    env: docker
    rootDir: ./services/video_service
    plan: free
    buildCommand: "" # Docker —Å–∞–º –≤—Å—ë —Å–æ–±–µ—Ä—ë—Ç
    envVars:
      - key: MONGO_URI
        value: mongodb+srv://<USERNAME>:<PASSWORD>@cluster0.mongodb.net/?retryWrites=true&w=majority
      - key: DB_NAME
        value: videosdb
    autoDeploy: true

  # ‚öôÔ∏è Transcoder Service
  - type: web
    name: transcoder-service
    env: docker
    rootDir: ./services/transcoder_service
    plan: free
    buildCommand: ""
    envVars:
      - key: VIDEO_SERVICE_URL
        fromService:
          name: video-service
          type: web
          property: url  # ‚úÖ —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
      - key: MONGO_URI
        value: mongodb+srv://<USERNAME>:<PASSWORD>@cluster0.mongodb.net/?retryWrites=true&w=majority
      - key: DB_NAME
        value: videosdb
    autoDeploy: true

  # üõ°Ô∏è Moderation Service
  - type: web
    name: moderation-service
    env: docker
    rootDir: ./services/moderation_service
    plan: free
    buildCommand: ""
    envVars:
      - key: VIDEO_SERVICE_URL
        fromService:
          name: video-service
          type: web
          property: url  # ‚úÖ Render –ø–æ–¥—Å—Ç–∞–≤–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ video-service
    autoDeploy: true
